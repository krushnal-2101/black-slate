var product_review=function(){function e(e){var i=(e=e||document).querySelectorAll("[data-zs-review-id]");if(0!=i.length){for(var n={},a=0;a<i.length;a++){var s=i[a],o=s.getAttribute("data-zs-review-type");o in n||(n[o]=[]),n[o].push(s.getAttribute("data-zs-review-id"))}var v=JSON.parse(JSON.stringify(n)),l=function(e,t){var i={};for(var n in e)if(e.hasOwnProperty(n))if(r[n]){var a=r[n],s=e[n].filter(function(e){var r=-1===a.indexOf(e);if(!r)for(var i=0;i<t.length;i++)if(t[i].getAttribute("data-zs-review-id")==e){t.splice(i,1);break}return r});i[n]=s}else i[n]=e[n];return{reviewids:i,elements:t}}(n,Array.prototype.slice.call(i));r=v;for(var c in l.reviewids)if(l.reviewids[c].length>0){var u=l.reviewids[c];do{var d={resource_ids:u.splice(0,200).join(","),view_type:c};$X.get({url:"/siteapps/commentbox/commentscount",params:d,args:{viewType:c,elements:l.elements,resourceIds:l.reviewids[c]},handler:t})}while(u.length>0)}}}function t(e){for(var t=e.elements||[],r=e.viewType,i=(e.resourceIds,t.length),n=JSON.parse(this.responseText).commentbox_comments_count,a=0;a<i;a++){var s=t[a],o=s.getAttribute("data-zs-review-id");s.getAttribute("data-zs-review-type")==r&&n[o]&&(s.innerHTML=n[o],s.style.display="")}}var r={};return{init:function(t,r){e(document)},initForElement:e,clearCache:function(){r={}}}}();